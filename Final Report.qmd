---
title: "Housing segregation in the Mumbai Metropolitan Region - a spatial model for caste-based discrimination"
author: "Aaditya Warrier"
bibliography: references.bib
format: pdf
editor: visual
editor_options: 
  chunk_output_type: console
---

```{r setup, echo = FALSE, include = FALSE, warning=FALSE}
library(tidyverse)
library(sf)
library(knitr)
opts_chunk$set(warning = FALSE, echo = FALSE)
```

## 1. Introduction

Mumbai, India's financial and commercial capital, is both its wealthiest city and its most diverse. The current capital of Maharashtra and the former headquarters of the Bombay Presidency during British rule - which at its peak extended as far as present-day Sindh in Pakistan - the city has long been home to large minority communities, but was always dominated by Maharashtrians and Gujaratis, who comprised a bulk of the natives of the region. Post-independence, however, the city was (and continues to be) shaped by waves of immigration from across the state and the country, exponentially growing its population and consequently its urbanized area to accommodate these new residents. Large swathes of land to the north of the city, previously independent towns or villages, were annexed by administration, with sprawl oriented around the three major railway lines emanating from the historic city. Mumbai is no stranger to expansion - indeed, the city owes its mere existence to land reclamation by the British - but its scale and scope in the past few decades has been unprecedented. In 1951, the city covered 231.5 $km^2$ and housed 2.3 million people. By 2011, the city's metropolitan region (henceforth shortened as MMR) spanned 6,328 $km^2$ with 23.5 million people, with the city proper housing 12.2 million over a mere 603 $km^2$. Today, Maharashtrians and Gujaratis only make up 42% and 19% of the city's population respectively, the rest being natives of other states.

These rapid changes in demography have brought with them a significant rise in ethnic, religious, and caste tension.

At the same time, real estate prices tend to decrease as one moves north and east, effectively pricing out and incentivizing those shut out of the city's restrictive market to seek housing

Daily commutes of three hours or more are common

The state was the center of the caste movement

Combined with rising real estate prices, these have manifested in social segregation

Lower-caste Hindus, especially non-Brahmin Maharashtrians, are more likely to be non-vegetarian

The existence of widespread discrimination in Mumbai's housing market has been well-established in the literature [@Shaban2021], despite recent laws that have attempted to curb the practice [@Koppikar_2023]. However, little analysis has been conducted on segregation in the wider metropolitan region, outside the boundaries of the city proper.

This project aims to explore to what extent Dalits and other lower caste groups have been pushed to the margins s

at a more granular level

[see @BHARATHI2023110951]

## 2. Data

The data used in this study comes from The Socioeconomic High-resolution Rural-Urban Geographic Platform for India Project (abbrv. SHRUG). SHRUG is an open access repository that aims to link hundreds of Indian datasets comprising socio-economic surveys, censuses, and environmental studies with common geographic identifiers. Owing to the nation's size and diversity, Indian record-keeping is notoriously inconsistent, with formats, naming conventions, and even languages often differing within the same state; SHRUG circumvents this issue through its standardization process. SHRUG also obtains a level of geographic granulality that cannot be found in any single government dataset - by splitting the nation into 576,153 uniform areal units termed "shrids" and reaggregating all variables to these, it provides a largely consistent framework by which to analyse different regions at a deeper level than states, districts and sub-districts. It is for this reason that the project utilizes **2011 Population Census Data** [credited to @pcindia; @almn2021] over more recent data like the National Family Health Survey from 2019-21 - cleaning the latter to a level acceptable for analysis would have been a months-long project, as it is not currently available in SHRUG. It would also not yield the granularity desired of areal data for spatial modelling.

The 2011 Population Census Abstract data comes from decennial censuses the Indian government conducts, sampling over 650,000 households across

As stored at the shrid-level in SHRUG, it contains a multitude of variables on employment and occupation as well as demographics like

Key variables of interest were the Scheduled Caste/Scheduled Tribe (SC/ST) population in each shrid and

SC/ST are Indian government designations for Dalits and Adivasis

### 2.1 Data Cleaning

As SHRUG stores district/sub-district data separately from shrid-level data, with no linking variables between the two, finding the specific shrids that comprised the MMR outside of the city proper proved a challenge. This was compounded by the fact that the MMR is defined by the Municipal Corporation and Councils that comprise it, the exact boundaries for which occasionally span multiple state-level districts or include very small portions of specific sub-districts. To rectify this problem as much as possible, the spatial intersection (between the most relevant sub-districts of the MMR and all shrids was computed. This, however, missed out on a few areas of interest, most notably the majority of the municipal council of Khopoli, while including a few parcels of rural land that were not relevant. The final population of the cleaned dataset was

the area of analysis may not perfectly correspond to every area of the MMR s

Note that all of the city proper is a single shrid - the authors of SHRUG mention this as a problem in their documentation and

### 2.2 Exploration

```{r echo  =FALSE, warning=FALSE}
mmr_shrid <- readRDS("data/cleaned/mmr_shrid.rds")

tab <- mmr_shrid |>
  summarize(sc_pop = (sum(pc11_pca_p_sc) / sum(pc11_pca_tot_p))* 100,
            st_pop = (sum(pc11_pca_p_st) / sum(pc11_pca_tot_p)) *100, 
            total = sc_pop + st_pop) |>
  as_tibble() |>
  select(-geometry) |>
  rbind(mmr_shrid |>
          filter(shrid2 != "11-27-518-99999-802794") |>
  summarize(sc_pop = (sum(pc11_pca_p_sc) / sum(pc11_pca_tot_p))* 100,
            st_pop = (sum(pc11_pca_p_st) / sum(pc11_pca_tot_p)) *100,
            total = sc_pop + st_pop) |>
     as_tibble() |>
  select(-geometry)) |>
  rbind(c(0.166 *100, 0.086 *100, (0.166 + 0.086)*100)) 

rownames(tab) <- c("MMR", "MMR (excluding city proper)", "India")

tab |>
  rownames_to_column() |>
  kable(digits = 2, col.names = c("Region", "SC Population (% of total)", "ST Population (% of total)", "Combined SC/ST Population (% of total)"), 
        row.names = TRUE, caption = "Caste demography of the MMR vs. India")
```

```{r echo = FALSE, warning=FALSE}

mmr_shrid |>
  # filter(shrid2 != ) |>
  mutate(sc_st_prop = (pc11_pca_p_sc + pc11_pca_p_st) / 
                                  pc11_pca_tot_p) |>
  ggplot() + 
  geom_sf(aes(fill = sc_st_prop), color = ifelse(mmr_shrid$shrid2 == "11-27-518-99999-802794", "red", NA)) +
  scale_fill_viridis_c() + 
  labs(fill = "Proportion of SC/ST residents")
```

Table 1 displays a breakdown of caste percentages

This is confirmed by Figure 1, which displays a chloropleth-map of all regions of the MMR (including Mumbai City/Suburban districts). As before, note that all of the city proper is a single, large shrid, outlined in red on the map. We observe a pattern of increasing SC/ST percentages as we move further from the city proper,

This indicates

```{r}
mmr_shrid_2 <- mmr_shrid |>
  filter(shrid2 != "11-27-518-99999-802794")

A = spdep::mat2listw(st_touches(mmr_shrid_2, sparse=FALSE), zero.policy = TRUE)

broom::tidy(spdep::geary.test((mmr_shrid_2$pc11_pca_p_sc + mmr_shrid_2$pc11_pca_p_st) / 
                                  mmr_shrid_2$pc11_pca_tot_p, A)) |>
  select(estimate1, p.value) |>
  kable(digits = 3, col.names = c("Geary's C", "P-value")) |>
  kableExtra::kable_styling(font_size = 9)
  
```

Conducting Geary's C shows us clear evidence of positive spatial autocorrelation i.e. that a shrid with

## 3. Methodology

### 3.1 Primary Outcome

The primary outcome of this study is the global spatial dissimilarity index, first formalized in [@Feitosa_2007]. This index was chosen for its prior use in the Indian context[see @Haque_2021, which explores spatial segregation in Kolkata and Bengaluru] as well as its ability to mitigate the so-called "checkerboard problem"[@Reardon_2004], of central importance in a city like Mumbai

Significance will be tested using a pseudo-significance "p-value" measure, computed on random permutation tests of dissimilarity across different spatial arrangements of the region [using the procedure described in @Feitosa_2007 pp. 309-310].

## 4. Results

## 5. Discussion and Evaluation

## Appendix

### References

::: {#refs}
:::
